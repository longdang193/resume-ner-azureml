# Conda Environment Definition for Training
# This file defines the Python dependencies for the training environment
# Using OpenMPI base image + explicit PyTorch definition for reproducibility

name: resume-ner-training
channels:
  - pytorch
  - conda-forge
  - defaults
dependencies:
  - python=3.10
  - pytorch=2.2.0  # PyTorch 2.2.0+ required for compatibility with newer transformers (pytree API: _register_pytree_node)
  - cpuonly  # CPU-only PyTorch installation (lightweight, no CUDA)
  - pip
  - pip:
    - azureml-defaults  # Required for Azure ML tracking/logging
    - transformers>=4.35.0,<5.0.0  # Compatible with PyTorch 2.2.0+
    - datasets>=2.12.0
    - numpy>=1.24.0
    - pandas>=2.0.0
    - scikit-learn>=1.3.0
    - azure-ai-ml>=1.0.0
    - azure-identity>=1.12.0
    - azure-storage-blob>=12.17.0
    - pyyaml>=6.0
    - tqdm>=4.65.0
    - seqeval>=1.2.2
    - mlflow  # For experiment tracking
    - azureml-mlflow  # Azure ML MLflow integration
    - onnxruntime  # For Phase 2 inference (ONNX model serving)


